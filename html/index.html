<html>
<head>
    <!-- Latest compiled and minified CSS -->
    <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"> -->

    <!-- Latest compiled JavaScript -->
    <!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script> -->

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script>
        $(document).ready(function(){
            // click on button submit
            $("#submit").on('click', function(){
                // send ajax
                var $form = $("#form");
                $.ajax({
                    url: 'http://localhost:5265/expense', // url where to submit the request
                    type : "POST", // type of action POST || GET
                    dataType : 'json', // data type
                    // data : JSON.stringify($(form).serializeArray() ), // post data || get data
                    // data: '{"date": "2022-01-01","sum": 1,"tag": "","notes": ""}',
                    data: JSON.stringify({
                        date: $("#date").val(),
                        sum: $("#sum").val(),
                        tag: $("#tag").val(),
                        notes: $("#notes").val()
                    }),
                    contentType: 'application/json;charset=UTF-8',
                    success : function(result) {
                        // you can see the result from the console
                        // tab of the developer tools
                        // console.log(result);
                        document.getElementById("status").innerHTML = "Success!";
                    },
                    error: function(xhr, resp, text) {
                        // console.log(xhr, resp, text);
                        alert("Error. Please re-check your input");
                    }
                })
            });
        });

    </script>
</head>
<body>
<h1>Report expense</h1>
<form id="form" action="http://localhost:5265/expense" method="post">
    <label for="date">Date:</label><br>
    <input type="date" id="date" name="date"><br>
    <label for="sum">Sum:</label><br>
    <input type="text" id="sum" name="sum" placeholder="0.00"><br>
    <label for="tag">Tag:</label><br>
    <input type="text" id="tag" name="tag" placeholder="food"><br>
    <label for="notes">Notes:</label><br>
    <input type="text" id="notes" name="notes" placeholder="bag of walnuts"><br><br>
    <!-- <input id="submit" type="submit" value="Submit"> -->
</form>
<button id="submit">Submit</button>
<div id="status"></div>
</body>
</html>
